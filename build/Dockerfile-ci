FROM node:12
# cloudbuild use /workspace as default folder
# https://cloud.google.com/cloud-build/docs/build-config#dir
WORKDIR /workspace
COPY package*.json ./
RUN yarn install && cd /workspace/node_modules/hkclient-ts && yarn install && yarn prepare && rm -rf ./node_modules
COPY . .
CMD [ "sleep", "infinity" ]